<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ViralClip Pro v3.0 - Netflix-Level Viral Content Creator</title>

    <!-- Performance optimizations -->
    <link rel="preload" href="/static/app.js" as="script">
    <link rel="preload" href="/public/styles.css" as="style">

    <!-- PWA manifest -->
    <link rel="manifest" href="/public/manifest.json">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <!-- Styles -->
    <link rel="stylesheet" href="/public/styles.css">

    <!-- Meta tags for sharing -->
    <meta name="description" content="Create viral video clips with AI-powered real-time analysis and Netflix-level quality">
    <meta property="og:title" content="ViralClip Pro v3.0">
    <meta property="og:description" content="Transform your videos into viral clips with instant feedback">
    <meta property="og:type" content="website">

    <!-- Performance monitoring -->
    <script>
        window.performanceMarks = {
            domContentLoaded: 0,
            loadComplete: 0
        };

        document.addEventListener('DOMContentLoaded', () => {
            window.performanceMarks.domContentLoaded = performance.now();
            console.log('📊 Page Load Performance:');
            console.log('DOM Content Loaded:', window.performanceMarks.domContentLoaded, 'ms');
        });

        window.addEventListener('load', () => {
            window.performanceMarks.loadComplete = performance.now();
            console.log('Full Load Time:', window.performanceMarks.loadComplete - window.performanceMarks.domContentLoaded, 'ms');
        });
    </script>
</head>
<body>
    <!-- Loading Splash Screen -->
    <div class="loading-splash">
        <div class="loading-logo">🎬 ViralClip Pro</div>
        <div class="loading-spinner"></div>
        <p>Loading Netflix-level experience...</p>
    </div>

    <!-- Main Application Container -->
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">🎬 ViralClip Pro v3.0</div>
            <div class="header-actions">
                <div class="system-status">
                    <span class="status-indicator" id="system-status"></span>
                    <span class="status-text">System Ready</span>
                </div>
                <button class="btn-secondary" data-action="restart">🔄 Restart</button>
            </div>
        </header>

        <!-- Step Navigation -->
        <nav class="step-nav">
            <div class="nav-item active" data-step="upload">
                <div class="nav-circle">1</div>
                <div class="nav-label">Upload & Preview</div>
            </div>
            <div class="nav-item" data-step="analysis">
                <div class="nav-circle">2</div>
                <div class="nav-label">Real-time Analysis</div>
            </div>
            <div class="nav-item" data-step="processing">
                <div class="nav-circle">3</div>
                <div class="nav-label">Smart Processing</div>
            </div>
            <div class="nav-item" data-step="results">
                <div class="nav-circle">4</div>
                <div class="nav-label">Viral Results</div>
            </div>
        </nav>

        <!-- Step 1: Enhanced Upload with Instant Preview -->
        <div class="step active" id="step-upload">
            <div class="upload-container">
                <h2>🚀 Upload Your Video for Instant Viral Analysis</h2>
                <p class="step-description">
                    Drop your video below and watch real-time analysis unfold with Netflix-level processing
                </p>

                <form id="upload-form" enctype="multipart/form-data">
                    <div class="upload-area" id="upload-area">
                        <div class="upload-icon">📹</div>
                        <div class="upload-text">Drop your video here or click to browse</div>
                        <div class="upload-subtitle">Get instant viral potential analysis</div>

                        <div class="upload-specs">
                            <div class="spec-item">
                                <span class="spec-icon">📦</span>
                                <span>Max 2GB</span>
                            </div>
                            <div class="spec-item">
                                <span class="spec-icon">🎬</span>
                                <span>MP4, MOV, AVI, MKV</span>
                            </div>
                            <div class="spec-item">
                                <span class="spec-icon">⚡</span>
                                <span>Real-time Preview</span>
                            </div>
                            <div class="spec-item">
                                <span class="spec-icon">🎯</span>
                                <span>Instant Viral Score</span>
                            </div>
                        </div>
                    </div>

                    <input type="file" id="file-input" name="file" accept="video/*" style="display: none;">

                    <button type="submit" class="btn btn-primary" disabled>
                        <span class="btn-icon">🎯</span>
                        <span class="btn-text">Select a video to analyze</span>
                    </button>
                </form>
            </div>
        </div>

        <!-- Step 2: Real-time Analysis with Interactive Timeline -->
        <div class="step" id="step-analysis">
            <div class="analysis-container">
                <h2>🎯 Real-time Viral Analysis Dashboard</h2>
                <p class="step-description">
                    Watch your video's viral potential unfold in real-time with interactive timeline and live feedback
                </p>

                <div class="realtime-analysis-container">
                    <!-- Real-time Viral Score Chart -->
                    <div class="viral-chart-section">
                        <h3>📈 Live Viral Score Tracking</h3>
                        <div id="viral-chart">
                            <!-- Dynamic viral chart will be inserted here -->
                        </div>
                    </div>

                    <!-- Interactive Timeline -->
                    <div class="timeline-section">
                        <h3>🎬 Interactive Timeline</h3>
                        <div id="interactive-timeline">
                            <!-- Interactive timeline will be inserted here -->
                        </div>
                    </div>
                </div>

                <!-- Real-time Preview Player -->
                <div class="preview-section">
                    <h3>⚡ Live Preview Generator</h3>
                    <div id="realtime-preview">
                        <!-- Real-time preview player will be inserted here -->
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="analysis-actions">
                    <button class="btn btn-secondary" data-action="back">← Back to Upload</button>
                    <button class="btn btn-primary" id="start-processing">
                        <span class="btn-icon">🚀</span>
                        <span class="btn-text">Start Enhanced Processing</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 3: Enhanced Processing with Entertainment -->
        <div class="step" id="step-processing">
            <div class="processing-container">
                <h2>🎪 Creating Your Viral Masterpiece</h2>
                <p class="step-description">
                    Sit back and enjoy our entertaining processing experience while we craft your viral clips
                </p>

                <div id="processing-status">
                    <!-- Enhanced processing interface will be inserted here -->
                </div>

                <!-- Action Buttons -->
                <div class="processing-actions" style="margin-top: 2rem;">
                    <button class="btn btn-secondary" data-action="back">← Back to Analysis</button>
                    <button class="btn btn-primary" id="view-results" style="display: none;">
                        <span class="btn-icon">🎉</span>
                        <span class="btn-text">View Your Viral Clips</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 4: Results -->
        <div class="step" id="step-results">
            <div class="results-container">
                <h2>🎉 Your Viral Clips Are Ready!</h2>
                <p class="step-description">
                    Download your professionally crafted viral clips optimized for maximum engagement
                </p>

                <div id="results-grid">
                    <!-- Results will be populated here -->
                </div>

                <!-- Action Buttons -->
                <div class="results-actions">
                    <button class="btn btn-secondary" data-action="restart">🔄 Create Another</button>
                    <button class="btn btn-primary" id="download-all">
                        <span class="btn-icon">📥</span>
                        <span class="btn-text">Download All Clips</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Global Error Boundary -->
    <div id="error-boundary" style="display: none;">
        <div class="error-content">
            <h3>Something went wrong</h3>
            <p>The application encountered an unexpected error. Please refresh the page.</p>
            <button onclick="location.reload()" class="btn btn-primary">Reload</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/static/app.js"></script>

    <!-- Analytics and monitoring -->
    <script>
        // Basic error tracking
        window.addEventListener('error', (event) => {
            console.error('Global error caught:', {
                message: event.message,
                filename: event.filename,
                lineno: event.lineno,
                colno: event.colno,
                error: event.error
            });
        });

        // Performance monitoring
        window.addEventListener('load', () => {
            if ('performance' in window && 'timing' in performance) {
                const timing = performance.timing;
                const loadTime = timing.loadEventEnd - timing.navigationStart;
                console.log(`📊 Total Load Time: ${loadTime}ms`);
            }
        });
    </script>
</body>
</html>